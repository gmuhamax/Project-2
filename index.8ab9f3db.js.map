{"mappings":"","sources":["src/js/tool.js"],"sourcesContent":["const check = (el, default_) => (el ? el : default_);\r\nconst random = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;\r\n\r\nasync function loadCard(page, search, country) {\r\n    try {\r\n        let links = `https://app.ticketmaster.com/discovery/v2/events?apikey=${apiKey}&keyword=${search}&page=${page}&countryCode=${country}`\r\n        let response = await fetch(links);\r\n        response = await response.json();\r\n\r\n        console.log(links);\r\n\r\n        cont.innerHTML = \"\";\r\n        pages.innerHTML = createPagination(Number(page), Number(response.page.totalPages) > 49 ? 49 : Number(response.page.totalPages) - 1);\r\n\r\n        let data_now = new Date();\r\n        let default_time = `${data_now.getFullYear()}-${data_now.getMonth()}-${data_now.getDay()}`;\r\n\r\n        response._embedded.events.forEach((el) => {\r\n            cont.innerHTML += `\r\n                <div class=\"main__card\" style=\"--from: ${random(-500, 500)}px; --time: ${random(500, 2000)}ms;\">\r\n                    <img src=\"${el.images[0].url}\" class=\"main__card-preview\">\r\n                    <h2 class=\"main__card-title\" data-id=\"${el.id}\">${el.name}</h2>\r\n                    <span class=\"main__card-data\">${check(el.dates.start.localDate, default_time)}</span>\r\n                    <span class=\"main__card-place\">${check(el.dates.timezone, \"America/New_York\")}</span>\r\n                </div>\r\n                `;\r\n        });\r\n    } catch (error) {\r\n        cont.innerHTML = \"<h2 class='header__title'>NOT FOUND</h2>\"\r\n    }\r\n}\r\n\r\nfunction createPagination(page, totalPages){\r\n  let liTag = '';\r\n  let beforePage = page - 1;\r\n  let afterPage = page + 1;\r\n\r\n  if(page > 2) {\r\n    liTag += `<li class=\"footer__numbers-number\">1</li>`;\r\n    if(page > 3){\r\n      liTag += `<li class=\"footer__numbers-number\">...</li>`;\r\n    }\r\n  }\r\n\r\n  if (page == totalPages) {\r\n    beforePage = beforePage - 2;\r\n  } else if (page == totalPages - 1) {\r\n    beforePage = beforePage - 1;\r\n  }\r\n\r\n  if (page == 1) {\r\n    afterPage = afterPage + 2;\r\n  } else if (page == 2) {\r\n    afterPage  = afterPage + 1;\r\n  }\r\n\r\n  for (let plength = beforePage; plength <= afterPage; plength++) {\r\n    if (plength > totalPages) {\r\n      continue;\r\n    }\r\n    if (plength == 0) {\r\n      plength += 1;\r\n    }\r\n    liTag += `<li class=\"footer__numbers-number${page == plength ? \" active\" : \"\"}\">${plength}</li>`;\r\n  }\r\n\r\n  if(page < totalPages - 1){\r\n    if(page < totalPages - 2){\r\n      liTag += `<li class=\"footer__numbers-number\">...</li>`;\r\n    }\r\n    liTag += `<li class=\"footer__numbers-number\">${totalPages}</li>`;\r\n  }\r\n\r\n  return liTag;\r\n}"],"names":[],"version":3,"file":"index.8ab9f3db.js.map"}